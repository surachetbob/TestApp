import streamlit as st

# 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô 'centered' ‡∏à‡∏∞‡∏î‡∏π‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
st.set_page_config(page_title="PA Insurance Calculator", layout="centered")

# CSS ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ô‡∏¥‡πâ‡∏ß‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™
st.markdown("""
    <style>
    .stButton>button {
        width: 100%;
        border-radius: 10px;
        height: 3em;
        background-color: #007bff;
        color: white;
    }
    [data-testid="stMetricValue"] {
        font-size: 30px;
    }
    </style>
    """, unsafe_allow_stdio=True)

st.title("üõ°Ô∏è PA Calculator")
st.write("‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•")

# --- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á ---
PLAN_BENEFITS = {
    "AIANPA2500": {
        "‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï/‡∏ó‡∏∏‡∏û‡∏û‡∏•‡∏†‡∏≤‡∏û (AD,DD,PD)": "500,000",
        "‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• (ME)": "20,000",
        "‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå (MC)": "250,000",
        "‡∏Ü‡∏≤‡∏ï‡∏Å‡∏£‡∏£‡∏° (MA)": "250,000",
        "‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡πÅ‡∏ï‡∏Å‡∏´‡∏±‡∏Å (BB)": "10,000",
        "‡∏Ñ‡πà‡∏≤‡∏õ‡∏•‡∏á‡∏®‡∏û (CM)": "10,000",
        "‡∏≠‡∏≤‡∏¢‡∏∏": "15 ‡∏ß‡∏±‡∏ô - 70 ‡∏õ‡∏µ"
    },
    "AIANPA3000": {
        "‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï/‡∏ó‡∏∏‡∏û‡∏û‡∏•‡∏†‡∏≤‡∏û (AD,DD,PD)": "600,000",
        "‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• (ME)": "35,000",
        "‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô‡∏¢‡∏ô‡∏ï‡πå (MC)": "600,000",
        "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î (PH)": "600,000",
        "‡∏≠‡∏≤‡∏¢‡∏∏": "15 ‡∏ß‡∏±‡∏ô - 74 ‡∏õ‡∏µ"
    },
    "AIANPA3800": {
        "‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï/‡∏ó‡∏∏‡∏û‡∏û‡∏•‡∏†‡∏≤‡∏û (AD,DD,PD)": "500,000",
        "‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• (ME)": "50,000",
        "‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (PP)": "1,050,000",
        "‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ (HU)": "500/‡∏ß‡∏±‡∏ô",
        "‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏î‡∏π‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß (FCG)": "1,000 (60‡∏î.)",
        "‡∏≠‡∏≤‡∏¢‡∏∏": "16 - 60 ‡∏õ‡∏µ"
    }
}

def get_premium(plan, age):
    rates = {
        "AIANPA2500": [(60, 2500), (65, 2700), (70, 3150), (75, 4000)],
        "AIANPA3000": [(60, 3000), (65, 3250), (70, 3750), (75, 4700)],
        "AIANPA3800": [(60, 3800), (65, 4600), (70, 5300), (75, 6770)],
    }
    for limit, price in rates.get(plan, []):
        if age <= limit: return price
    return None

# --- ‡∏™‡πà‡∏ß‡∏ô UI ‡∏´‡∏•‡∏±‡∏Å (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Sidebar ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠) ---
with st.expander("üìù ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Ç‡∏≠‡πÄ‡∏≠‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô", expanded=True):
    name = st.text_input("‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•", placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì")
    
    # ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÅ‡∏•‡∏∞ ‡πÄ‡∏û‡∏®
    c1, c2 = st.columns(2)
    with c1:
        age = st.number_input("‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏õ‡∏µ)", min_value=0, max_value=75, value=25)
    with c2:
        gender = st.selectbox("‡πÄ‡∏û‡∏®", ["‡∏ä‡∏≤‡∏¢", "‡∏´‡∏ç‡∏¥‡∏á"])
        
    plan_choice = st.select_slider("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏†‡∏±‡∏¢", options=list(PLAN_BENEFITS.keys()))

submit = st.button("‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ üöÄ")

if submit:
    premium = get_premium(plan_choice, age)
    
    # ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÄ‡∏î‡πà‡∏ô‡πÜ
    st.divider()
    st.subheader("üí∞ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì")
    st.metric(label="‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏†‡∏±‡∏¢‡∏£‡∏≤‡∏¢‡∏õ‡∏µ", value=f"{premium:,} ‡∏ö‡∏≤‡∏ó")
    
    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏≠‡∏≤‡∏¢‡∏∏
    if plan_choice == "AIANPA3800" and age < 16:
        st.error("‚ö†Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏ 16 ‡∏õ‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô")
    
    # ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏ö‡∏ö Card
    with st.container():
        st.markdown(f"""
        **‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£:** {name} | **‡πÄ‡∏û‡∏®:** {gender} | **‡∏≠‡∏≤‡∏¢‡∏∏:** {age} ‡∏õ‡∏µ
        """)

    # ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á (‡πÉ‡∏ä‡πâ DataFrame ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Scroll ‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤‡πÑ‡∏î‡πâ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
    st.write(f"### ‚ú® ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á {plan_choice}")
    benefits = PLAN_BENEFITS[plan_choice]
    st.dataframe(
        [{"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£": k, "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á": v} for k, v in benefits.items()],
        use_container_width=True,
        hide_index=True
    )

    st.info("üìû ‡∏™‡∏ô‡πÉ‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ô ‡πÇ‡∏ó‡∏£ 086-5348448")

# ‡∏ü‡∏∏‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
st.caption("‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ä‡∏±‡πâ‡∏ô 1 ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô")
